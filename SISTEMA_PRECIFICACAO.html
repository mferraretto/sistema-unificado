
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Calculadora de Custo de Produção</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: auto;
      padding: 30px;
    }
    input {
      width: 100px;
      margin: 5px;
    }
    label {
      display: inline-block;
      width: 250px;
    }
    .result {
      background: #f5f5f5;
      padding: 15px;
      margin-top: 20px;
      font-size: 16px;
      border-radius: 8px;
    }
    h2 {
      margin-top: 30px;
    }
    .tab {
      display: none;
    }
    .tab.active {
      display: block;
    }
    .tab-buttons {
      margin-bottom: 20px;
    }
    .tab-buttons button {
      padding: 10px 20px;
      margin-right: 10px;
      font-weight: bold;
      cursor: pointer;
    }
.cilindro-bloco {
  margin-bottom: 20px;
  padding: 15px;
  border: 1px solid #ccc;
  border-radius: 10px;
  background: #f9f9f9;
}

.cilindro-bloco h4 {
  margin-top: 0;
  margin-bottom: 10px;
  color: #444;
}

.cilindro-linha {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items: center;
}

.cilindro-linha label {
  width: auto;
  min-width: 90px;
  font-weight: bold;
}

.cilindro-linha input,
.cilindro-linha select {
  width: 100px;
  padding: 4px;
}

  </style>
</head>
<body>
  <h1>🛠 Sistema de Cálculo de Produção</h1>

  <div class="tab-buttons">
    <button onclick="showTab('mdf')">Custo MDF</button>
    <button onclick="showTab('mao')">Mão de Obra</button>
    <button onclick="showTab('embalagem')">Embalagem</button>
  <button onclick="showTab('cadastroChapas')">Cadastro de Chapas</button>
  <button onclick="showTab('custosIndiretos')">Custos Indiretos</button>
<button onclick="showTab('resumoFinal')">Resumo Final</button>
  </div>

  <div id="mdf" class="tab active">
    <h2>🪵 Custo de MDF por Trio de Cilindros</h2>

<h3>📐 Medidas das Peças</h3>

<div class="cilindro-bloco">
  <h4>🔹 Peça 1</h4>
  <div class="cilindro-linha">
    <label>Altura (cm):</label>
    <input type="number" id="alturaP1" value="80">

    <label>Diâmetro (cm):</label>
    <input type="number" id="diametroP1" value="50">

    <label>Chapa:</label>
    <select id="chapaP1" class="chapaSelect"></select>
  </div>
</div>

<div class="cilindro-bloco">
  <h4>🔹 Peça 2</h4>
  <div class="cilindro-linha">
    <label>Altura (cm):</label>
    <input type="number" id="alturaP2" value="60">

    <label>Diâmetro (cm):</label>
    <input type="number" id="diametroP2" value="40">

    <label>Chapa:</label>
    <select id="chapaP2" class="chapaSelect"></select>
  </div>
</div>

<div class="cilindro-bloco">
  <h4>🔹 Peça 3</h4>
  <div class="cilindro-linha">
    <label>Altura (cm):</label>
    <input type="number" id="alturaP3" value="40">

    <label>Diâmetro (cm):</label>
    <input type="number" id="diametroP3" value="30">

    <label>Chapa:</label>
    <select id="chapaP3" class="chapaSelect"></select>
  </div>
</div>

<div class="cilindro-bloco">
  <h4>🔹 Peça 4</h4>
  <div class="cilindro-linha">
    <label>Altura (cm):</label>
    <input type="number" id="alturaP4" value="30">

    <label>Diâmetro (cm):</label>
    <input type="number" id="diametroP4" value="25">

    <label>Chapa:</label>
    <select id="chapaP4" class="chapaSelect"></select>
</div>
  </div> <!-- fim do bloco peça 4 -->
<button onclick="calcularMDF()">Calcular Custo MDF</button>
<div class="result" id="resultadoMDF"></div>
</div> 

  <div id="mao" class="tab">
    <h2>👷 Cálculo de Mão de Obra</h2>
    <label>Mão de Obra Direta por Peça (R$):</label><input type="number" id="maoDireta" value="4"><br>
    <label>Mão de Obra Indireta Mensal (R$):</label><input type="number" id="maoIndireta" value="11000"><br>
    <label>Peças Produzidas no Mês:</label><input type="number" id="quantidadeMes" value="8000"><br>

    <br>
    <button onclick="calcularMaoObra()">Calcular Mão de Obra</button>
    <div class="result" id="resultadoMaoObra"></div>
  </div>

  <div id="embalagem" class="tab">
    <h2>📦 Cálculo de Custo de Embalagem Individual</h2>
    <label>Caixa (R$):</label><input type="number" id="caixa" value="2"><br>
    <label>Plástico Bolha (R$):</label><input type="number" id="plastico" value="1.5"><br>
    <label>Saco (R$):</label><input type="number" id="saco" value="0.5"><br>
    <label>Etiqueta (R$):</label><input type="number" id="etiqueta" value="0.3"><br>
    <label>Outros (R$):</label><input type="number" id="outros" value="0"><br>

    <br>
    <button onclick="calcularEmbalagem()">Calcular Embalagem</button>
    <div class="result" id="resultadoEmbalagem"></div>
  </div>
<div id="cadastroChapas" class="tab">
  <h2>📋 Cadastro de Chapas de MDF</h2>

  <label>Comprimento (cm):</label><input type="number" id="comprimentoChapa"><br>
  <label>Largura (cm):</label><input type="number" id="larguraChapaCadastro"><br>
  <label>Espessura (mm):</label><input type="number" id="espessuraChapa"><br>
  <label>Tipo:</label><input type="text" id="tipoChapa" placeholder="Ex: Cru, BP Branco"><br>
  <label>Preço (R$):</label><input type="number" id="precoChapaCadastro"><br>

  <br>
  <button onclick="salvarChapa()">Salvar Chapa</button>

  <h3>📦 Chapas Cadastradas:</h3>
  <table border="1" cellpadding="5">
    <thead>
      <tr>
        <th>Comprimento</th><th>Largura</th><th>Espessura</th><th>Tipo</th><th>Preço</th><th>Ações</th>
      </tr>
    </thead>
    <tbody id="tabelaChapas"></tbody>
  </table>
</div>

<div id="custosIndiretos" class="tab">
  <h2>🏭 Custos Indiretos Mensais</h2>

  <h3>1. Estrutura e Instalações</h3>
  <label>Aluguel do galpão ou oficina:</label><input type="number" class="indireto" id="aluguel" name="aluguel"><br>
  <label>IPTU e taxas municipais:</label><input type="number" class="indireto" id="iptu" name="iptu"><br>
  <label>Condomínio:</label><input type="number" class="indireto" id="condominio" name="condominio"><br>
  <label>Seguro patrimonial:</label><input type="number" class="indireto" id="seguro" name="seguro"><br>

  <h3>2. Utilidades e Manutenção</h3>
  <label>Energia elétrica:</label><input type="number" class="indireto" id="energia" name="energia"><br>
  <label>Água e esgoto:</label><input type="number" class="indireto" id="agua" name="agua"><br>
  <label>Manutenção de máquinas:</label><input type="number" class="indireto" id="manutencao" name="manutencao"><br>
  <label>Gás:</label><input type="number" class="indireto" id="gas" name="gas"><br>
  <label>Depreciação de máquinas:</label><input type="number" class="indireto" id="depreciacao" name="depreciacao"><br>

  <h3>3. Logística e Armazenamento</h3>
  <label>Transporte interno:</label><input type="number" class="indireto" id="transporteInterno" name="transporteInterno"><br>
  <label>Depósito/Estoque:</label><input type="number" class="indireto" id="deposito" name="deposito"><br>
  <label>Empacotamento geral:</label><input type="number" class="indireto" id="empacotamentoGeral" name="empacotamentoGeral"><br>

  <h3>4. Custos Administrativos</h3>
  <label>Sistema de gestão (ERP, NF):</label><input type="number" class="indireto" id="erp" name="erp"><br>
  <label>Contabilidade:</label><input type="number" class="indireto" id="contabilidade" name="contabilidade"><br>
  <label>Licenças e alvarás:</label><input type="number" class="indireto" id="licencas" name="licencas"><br>
  <label>Internet, telefone, papel:</label><input type="number" class="indireto" id="internet" name="internet"><br>
  <label>Softwares (Canva, Drive):</label><input type="number" class="indireto" id="softwares" name="softwares"><br>
  <label>Equipe adm/financeiro:</label><input type="number" class="indireto" id="admin" name="admin"><br>

  <h3>5. Limpeza e Segurança</h3>
  <label>Produtos de limpeza:</label><input type="number" class="indireto" id="limpeza" name="limpeza"><br>
  <label>EPIs e uniformes:</label><input type="number" class="indireto" id="epis" name="epis"><br>
  <label>Brigadista/Segurança:</label><input type="number" class="indireto" id="seguranca" name="seguranca"><br>

  <h3>6. Marketing e Vendas</h3>
  <label>Fotos, vídeos e edição:</label><input type="number" class="indireto" id="midia" name="midia"><br>
  <label>Marketing pago (Ads):</label><input type="number" class="indireto" id="ads" name="ads"><br>
  <label>Ferramentas de atendimento:</label><input type="number" class="indireto" id="ferramentas" name="ferramentas"><br>
  <label>Comissão de vendedores:</label><input type="number" class="indireto" id="comissao" name="comissao"><br>

  <br>
  <button onclick="calcularCustosIndiretos()">Calcular Custos Indiretos</button>
  <div class="result" id="resultadoIndiretos"></div>
</div>
<div id="resumoFinal" class="tab">
  <h2>📊 Resumo Final do Produto</h2>

  <label>Custo MDF (R$):</label>
  <input type="number" id="custoMDF"><br>

  <label>Custo Mão de Obra (R$):</label>
  <input type="number" id="custoMao"><br>

  <label>Custo Embalagem (R$):</label>
  <input type="number" id="custoEmbalagem"><br>

  <label>Custo Indireto Total Mensal (R$):</label>
  <input type="number" id="custoIndiretoMensal"><br>

  <label>Qtd Produzida no Mês:</label>
  <input type="number" id="qtdMensal"><br>

  <label>Qtd Estimada de Vendas:</label>
  <input type="number" id="qtdVendida"><br><br>

  <label><strong>📦 Nome do Produto:</strong></label><br>
  <input type="text" id="nomeProduto" placeholder="Ex: Trio Cilindros Festa"><br><br>

  <label><strong>🔢 Código / SKU:</strong></label><br>
  <input type="text" id="codigoProduto" placeholder="Ex: KIT-CIL-PMG-001"><br><br>

  <button onclick="calcularResumoFinal()">Calcular Resumo</button>
<button onclick="calcularResumoFinal(); exportarResumoPDF()">📄 Exportar PDF</button>

  <!-- Visível na tela -->
<div id="resumoContainer" style="padding: 15px; border: 1px solid #ccc; margin-top: 20px; background: white; font-family: Arial, sans-serif;">
  <div id="resultadoResumo"></div>
</div>

<!-- Invisível, usado apenas para exportar -->
<div id="resumoPDFContent" style="height: auto; visibility: hidden; position: absolute; left: -9999px;"></div>

</div>
  <script>
   function showTab(id) {
  document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function calcularMDF() {
  const pi = Math.PI;
  const chapas = JSON.parse(localStorage.getItem('chapasMDF') || '[]');

  function areaCilindro(h, d) {
    const r = d / 2;
    const base = pi * r * r;
    const lateral = 2 * pi * r * h;
    return base + lateral;
  }

  function calcularPeca(alturaId, diametroId, chapaId) {
    const altura = parseFloat(document.getElementById(alturaId).value) || 0;
    const diametro = parseFloat(document.getElementById(diametroId).value) || 0;
    const index = document.getElementById(chapaId).value;
    const chapa = chapas[index];

    if (!chapa || !chapa.comprimento || !chapa.largura || !chapa.preco) return { custo: 0, area: 0 };

    const area = areaCilindro(altura, diametro);
    const precoCm2 = chapa.preco / (chapa.comprimento * chapa.largura);
    return {
      custo: area * precoCm2,
      area: area
    };
  }

  const p1 = calcularPeca('alturaP1', 'diametroP1', 'chapaP1');
  const p2 = calcularPeca('alturaP2', 'diametroP2', 'chapaP2');
  const p3 = calcularPeca('alturaP3', 'diametroP3', 'chapaP3');
  const p4 = calcularPeca('alturaP4', 'diametroP4', 'chapaP4');

  const total = p1.custo + p2.custo + p3.custo + p4.custo;

  document.getElementById('resultadoMDF').innerHTML = `
    <strong>🔍 Resultado:</strong><br>
    ➤ Peça 1: R$ ${p1.custo.toFixed(2)}<br>
    ➤ Peça 2: R$ ${p2.custo.toFixed(2)}<br>
    ➤ Peça 3: R$ ${p3.custo.toFixed(2)}<br>
    ➤ Peça 4: R$ ${p4.custo.toFixed(2)}<br><br>
    <strong>💰 Custo total de MDF: R$ ${total.toFixed(2)}</strong>
  `;

  // 👉 Atualiza o campo do Resumo Final automaticamente
  const inputResumoMDF = document.getElementById('custoMDF');
  if (inputResumoMDF) {
    inputResumoMDF.value = total.toFixed(2);
  }
}


    function calcularMaoObra() {
  const maoDireta = parseFloat(document.getElementById('maoDireta').value) || 0;
  const maoIndireta = parseFloat(document.getElementById('maoIndireta').value) || 0;
  const quantidadeMes = parseFloat(document.getElementById('quantidadeMes').value) || 0;

  const maoIndiretaUnit = quantidadeMes > 0 ? maoIndireta / quantidadeMes : 0;
  const custoTotalUnit = maoDireta + maoIndiretaUnit;

  document.getElementById('resultadoMaoObra').innerHTML = `
    <strong>🔍 Resultado:</strong><br>
    ➤ Mão de Obra Direta: R$ ${maoDireta.toFixed(2)}<br>
    ➤ Mão de Obra Indireta por peça: R$ ${maoIndiretaUnit.toFixed(2)}<br>
    ➤ <strong>Custo total de mão de obra por peça: R$ ${custoTotalUnit.toFixed(2)}</strong>
  `;

  // 👉 Atualiza automaticamente no Resumo Final
  const inputResumoMao = document.getElementById('custoMao');
  if (inputResumoMao) {
    inputResumoMao.value = custoTotalUnit.toFixed(2);
  }
}

function calcularEmbalagem() {
  const caixa = parseFloat(document.getElementById('caixa').value) || 0;
  const plastico = parseFloat(document.getElementById('plastico').value) || 0;
  const saco = parseFloat(document.getElementById('saco').value) || 0;
  const etiqueta = parseFloat(document.getElementById('etiqueta').value) || 0;
  const outros = parseFloat(document.getElementById('outros').value) || 0;

  const total = caixa + plastico + saco + etiqueta + outros;

  document.getElementById('resultadoEmbalagem').innerHTML = `
    <strong>🔍 Resultado:</strong><br>
    ➤ Caixa: R$ ${caixa.toFixed(2)}<br>
    ➤ Plástico Bolha: R$ ${plastico.toFixed(2)}<br>
    ➤ Saco: R$ ${saco.toFixed(2)}<br>
    ➤ Etiqueta: R$ ${etiqueta.toFixed(2)}<br>
    ➤ Outros: R$ ${outros.toFixed(2)}<br><br>
    <strong>Custo total de embalagem: R$ ${total.toFixed(2)}</strong>
  `;

  // 👉 Atualiza automaticamente no Resumo Final
  const inputResumoEmbalagem = document.getElementById('custoEmbalagem');
  if (inputResumoEmbalagem) {
    inputResumoEmbalagem.value = total.toFixed(2);
  }
}
function salvarChapa() {
  const comprimento = document.getElementById('comprimentoChapa').value;
  const largura = document.getElementById('larguraChapaCadastro').value;
  const espessura = document.getElementById('espessuraChapa').value;
  const tipo = document.getElementById('tipoChapa').value;
  const preco = document.getElementById('precoChapaCadastro').value;

  if (!comprimento || !largura || !espessura || !tipo || !preco) {
    alert('Preencha todos os campos.');
    return;
  }

  const chapas = JSON.parse(localStorage.getItem('chapasMDF') || '[]');
  chapas.push({ comprimento, largura, espessura, tipo, preco });
  localStorage.setItem('chapasMDF', JSON.stringify(chapas));
  listarChapas();
}

function listarChapas() {
  const chapas = JSON.parse(localStorage.getItem('chapasMDF') || '[]');
  const tabela = document.getElementById('tabelaChapas');
  tabela.innerHTML = '';

  chapas.forEach((chapa, index) => {
    const linha = document.createElement('tr');
    linha.innerHTML = `
      <td>${chapa.comprimento}</td>
      <td>${chapa.largura}</td>
      <td>${chapa.espessura}</td>
      <td>${chapa.tipo}</td>
      <td>R$ ${parseFloat(chapa.preco).toFixed(2)}</td>
      <td><button onclick="excluirChapa(${index})">🗑 Excluir</button></td>
    `;
    tabela.appendChild(linha);
  });
}

function excluirChapa(index) {
  const chapas = JSON.parse(localStorage.getItem('chapasMDF') || '[]');
  chapas.splice(index, 1);
  localStorage.setItem('chapasMDF', JSON.stringify(chapas));
  listarChapas();
}
function preencherSelectChapas() {
  const chapas = JSON.parse(localStorage.getItem('chapasMDF') || '[]');
  const selects = document.querySelectorAll('.chapaSelect');

  selects.forEach(select => {
    select.innerHTML = `<option value="">-- Escolha uma chapa --</option>`;
    chapas.forEach((chapa, index) => {
      const texto = `${chapa.tipo} - ${chapa.comprimento}x${chapa.largura} - R$${parseFloat(chapa.preco).toFixed(2)}`;
      const option = document.createElement('option');
      option.value = index;
      option.textContent = texto;
      select.appendChild(option);
    });
  });
}

function atualizarCamposChapa() {
  const index = document.getElementById('selectChapa').value;
  if (index === "") {
    document.getElementById('larguraChapa').value = "";
    document.getElementById('alturaChapa').value = "";
    document.getElementById('precoChapa').value = "";
    return;
  }

  const chapas = JSON.parse(localStorage.getItem('chapasMDF') || '[]');
  const chapa = chapas[index];

  // Coloca os dados nos inputs usados pelo cálculo
  document.getElementById('larguraChapa').value = chapa.comprimento;
  document.getElementById('alturaChapa').value = chapa.largura;
  document.getElementById('precoChapa').value = chapa.preco;
}

window.onload = () => {
  listarChapas();
  preencherSelectChapas();
};
function calcularCustosIndiretos() {
  const campos = document.querySelectorAll('.indireto');
  let total = 0;
  campos.forEach(campo => {
    const valor = parseFloat(campo.value) || 0;
    total += valor;
  });

  document.getElementById('resultadoIndiretos').innerHTML = `
    <strong>🔍 Resultado:</strong><br>
    ➤ Total de Custos Indiretos Mensais: <strong>R$ ${total.toFixed(2)}</strong>
  `;

  // 👉 Atualiza automaticamente no Resumo Final
  const inputResumoIndireto = document.getElementById('custoIndiretoMensal');
  if (inputResumoIndireto) {
    inputResumoIndireto.value = total.toFixed(2);
  }
}
function calcularResumoFinal() {
  const nomeProduto = document.getElementById('nomeProduto')?.value || 'Produto não identificado';
  const codigoProduto = document.getElementById('codigoProduto')?.value || 'Sem código';

  const custoMDF = parseFloat(document.getElementById('custoMDF')?.value) || 0;
  const custoMao = parseFloat(document.getElementById('custoMao')?.value) || 0;
  const custoEmbalagem = parseFloat(document.getElementById('custoEmbalagem')?.value) || 0;
  const custoIndiretoMensal = parseFloat(document.getElementById('custoIndiretoMensal')?.value) || 0;
  const qtdMensal = parseFloat(document.getElementById('qtdMensal')?.value) || 1;
  const qtdVendida = parseFloat(document.getElementById('qtdVendida')?.value) || 0;

  const custoIndiretoUnit = custoIndiretoMensal / qtdMensal;
  const custoTotalUnit = custoMDF + custoMao + custoEmbalagem + custoIndiretoUnit;

  const preco20 = custoTotalUnit * 1.2;
  const preco25 = custoTotalUnit * 1.25;
  const preco30 = custoTotalUnit * 1.3;

  const lucroUnit20 = preco20 - custoTotalUnit;
  const lucroUnit25 = preco25 - custoTotalUnit;
  const lucroUnit30 = preco30 - custoTotalUnit;

  const pontoEquilibrio20 = lucroUnit20 > 0 ? custoIndiretoMensal / lucroUnit20 : 0;
  const pontoEquilibrio25 = lucroUnit25 > 0 ? custoIndiretoMensal / lucroUnit25 : 0;
  const pontoEquilibrio30 = lucroUnit30 > 0 ? custoIndiretoMensal / lucroUnit30 : 0;

  const lucroEstimado = lucroUnit20 * qtdVendida;

  // Mostra na tela com HTML estilizado
  const resumoHTML = `
    <strong>🧾 Identificação:</strong><br>
    ➤ Nome: <strong>${nomeProduto}</strong><br>
    ➤ Código: <strong>${codigoProduto}</strong><br><br>

    <strong>📋 Resumo:</strong><br>
    ➤ Custo MDF: R$ ${custoMDF.toFixed(2)}<br>
    ➤ Mão de Obra: R$ ${custoMao.toFixed(2)}<br>
    ➤ Embalagem: R$ ${custoEmbalagem.toFixed(2)}<br>
    ➤ Custo Indireto Unitário: R$ ${custoIndiretoUnit.toFixed(2)}<br>
    <strong>💰 Custo Total Unitário: R$ ${custoTotalUnit.toFixed(2)}</strong><br><br>

    <strong>Preços com Lucro:</strong><br>
    ➤ 20%: R$ ${preco20.toFixed(2)} | 📉 Ponto de Equilíbrio: ${pontoEquilibrio20.toFixed(0)} unidades<br>
    ➤ 25%: R$ ${preco25.toFixed(2)} | 📉 Ponto de Equilíbrio: ${pontoEquilibrio25.toFixed(0)} unidades<br>
    ➤ 30%: R$ ${preco30.toFixed(2)} | 📉 Ponto de Equilíbrio: ${pontoEquilibrio30.toFixed(0)} unidades<br><br>

    <strong>💸 Lucro com ${qtdVendida} vendidas (20% lucro):</strong> R$ ${lucroEstimado.toFixed(2)}
  `;

  const resultadoResumo = document.getElementById('resultadoResumo');
  if (resultadoResumo) {
    resultadoResumo.innerHTML = resumoHTML;
  }

  // Prepara o conteúdo para exportação em PDF (layout limpo)
  const pdfContent = `
    🧾 Identificação:
    ➤ Nome: ${nomeProduto}
    ➤ Código: ${codigoProduto}

    📋 Resumo:
    ➤ Custo MDF: R$ ${custoMDF.toFixed(2)}
    ➤ Mão de Obra: R$ ${custoMao.toFixed(2)}
    ➤ Embalagem: R$ ${custoEmbalagem.toFixed(2)}
    ➤ Custo Indireto Unitário: R$ ${custoIndiretoUnit.toFixed(2)}
    💰 Custo Total Unitário: R$ ${custoTotalUnit.toFixed(2)}

    Preços com Lucro:
    ➤ 20%: R$ ${preco20.toFixed(2)} | 📉 Ponto de Equilíbrio: ${pontoEquilibrio20.toFixed(0)} unidades
    ➤ 25%: R$ ${preco25.toFixed(2)} | 📉 Ponto de Equilíbrio: ${pontoEquilibrio25.toFixed(0)} unidades
    ➤ 30%: R$ ${preco30.toFixed(2)} | 📉 Ponto de Equilíbrio: ${pontoEquilibrio30.toFixed(0)} unidades

    💸 Lucro com ${qtdVendida} vendidas (20% lucro): R$ ${lucroEstimado.toFixed(2)}
  `;

  const resumoPDFContent = document.getElementById('resumoPDFContent');
  if (resumoPDFContent) {
    resumoPDFContent.innerHTML = `<pre style="font-size: 14px; line-height: 1.6em;">${pdfContent}</pre>`;
  }
}
function salvarCustosIndiretos() {
  const campos = document.querySelectorAll('#custosIndiretos .indireto');
  campos.forEach(campo => {
    localStorage.setItem(`indireto_${campo.name}`, campo.value);
  });
}

function carregarCustosIndiretos() {
  const campos = document.querySelectorAll('#custosIndiretos .indireto');
  campos.forEach(campo => {
    const valor = localStorage.getItem(`indireto_${campo.name}`);
    if (valor !== null) {
      campo.value = valor;
    }
  });
}

document.addEventListener('DOMContentLoaded', () => {
  carregarCustosIndiretos();

  const campos = document.querySelectorAll('#custosIndiretos .indireto');
  campos.forEach(campo => {
    campo.addEventListener('input', salvarCustosIndiretos);
  });
});
function exportarResumoPDF() {
  calcularResumoFinal(); // Garante que os dados estejam atualizados

  // Aguarda a atualização da DOM antes de exportar
  setTimeout(() => {
    const element = document.getElementById('resumoPDFContent');
    const nomeProduto = document.getElementById('nomeProduto').value.trim() || 'Produto';
    const codigoProduto = document.getElementById('codigoProduto').value.trim() || 'codigo';

    const opt = {
      margin: 0.5,
      filename: `${nomeProduto}-${codigoProduto}.pdf`,
      image: { type: 'jpeg', quality: 0.98 },
      html2canvas: { scale: 2 },
      jsPDF: { unit: 'cm', format: 'a4', orientation: 'portrait' }
    };

    html2pdf().set(opt).from(element).save();
  }, 100); // Pequeno delay para garantir que o conteúdo seja renderizado
}
  </script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

</body>
</html>
